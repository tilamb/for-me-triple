<!-- Contact -->
<div class="mb4">
  <h4 class="f3 b lh-title mb3 tc">Nous contacter</h4>
  
  <p class="successMsg" hidden>Votre message a bien été envoyé.</p>
  <p class="errorMsg" hidden>Une erreur s'est produite. Votre message n'a pas été envoyé.</p>
  
  <form name="contactform" method="POST" data-netlify="true" >
    <input type="hidden" name="form-name" value="contactform" />
    <div class="flex-l mhn1-l">
      <!-- Name -->
      <div class="ph1-l w-50-l">
        <fieldset>
          <input type="text" id="name" name="name" placeholder="Nom" class="w-100 mb2">
          <label for="name">Nom</label>
        </fieldset>
      </div>
      <!-- Email -->
      <div class="ph1-l w-50-l">
        <fieldset>
          <input type="email" id="email" name="email" placeholder="Email" class="w-100 mb2">
          <label for="email">Email</label>
        </fieldset>
      </div>
    </div>

    <!-- Message -->
    <fieldset>
      <textarea id="message" name="message" placeholder="Votre message" rows="8" cols="80" class="w-100"></textarea>
      <label for="message">Votre message</label>
    </fieldset>
    <!-- Button -->
    <div class="tc">
      <button type="submit" class="btn w-100 w-auto-ns raise">Envoyer</button>
    </div>
  </form>
  
  
  
  <script>
    const form = document.querySelector('form');
    form.addEventListener('submit', async event => {
        event.preventDefault();
    
        // disable button to prevent multiple submissions
        form.querySelector('button').disabled = true;

        // make the request to submit the form
        try {
        const response = await fetch('/', {
            method: 'post',
            headers: {
            'Content-type': 'application/x-www-form-urlencoded; charset=UTF-8'
            },
            // parse and submit all included form data
            body: new URLSearchParams(new FormData(form)).toString()
        });

        // if it was successful show success message
        if (response.status === 200) {
            document.querySelector('.successMsg').hidden = false;
        } else {
            document.querySelector('.errorMsg').hidden = false;
        }
        } catch (e) {
            console.error(e);
        }
    });
  </script>
</div>
